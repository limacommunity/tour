<!DOCTYPE html>
<html>
<head>
<title>Lima Community Church Virtual Tour</title>
<meta charset="utf-8">
<meta name="viewport" content="target-densitydpi=device-dpi, width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, minimal-ui" />
<style> @-ms-viewport { width: device-width; } </style>
<link rel="stylesheet" href="vendor/reset.min.css">
<link rel="stylesheet" href="style.css">
  <style>
    * { margin: 0; padding: 0; }
    html, body { height: 100%; overflow: hidden; font-family: Arial, sans-serif; }
    #pano { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
    
    .music-controls {
      position: absolute;
      top: 20px;
      right: 20px;
      display: flex;
      gap: 10px;
      z-index: 1000;
    }
    
    .music-button {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: rgba(67, 67, 67, 0.8);
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.2s;
      padding: 0;
    }
    
    .music-button:hover {
      background: rgba(100, 100, 100, 0.9);
    }
    
    .music-button svg {
      fill: white;
      width: 20px;
      height: 20px;
    }
    
    .volume-slider-container {
      position: relative;
      display: flex;
      align-items: center;
    }
    
    .volume-slider {
      position: absolute;
      right: 50px;
      width: 0;
      height: 40px;
      background: rgba(67, 67, 67, 0.8);
      border-radius: 20px;
      overflow: hidden;
      opacity: 0;
      transition: width 0.3s, opacity 0.3s;
      display: flex;
      align-items: center;
      padding: 0;
    }
    
    .volume-slider.active {
      width: 120px;
      opacity: 1;
      padding: 0 15px;
    }
    
    .volume-slider input[type="range"] {
      width: 100%;
      height: 4px;
      -webkit-appearance: none;
      appearance: none;
      background: rgba(255, 255, 255, 0.3);
      outline: none;
      border-radius: 2px;
    }
    
    .volume-slider input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 14px;
      height: 14px;
      border-radius: 50%;
      background: white;
      cursor: pointer;
    }
    
    .volume-slider input[type="range"]::-moz-range-thumb {
      width: 14px;
      height: 14px;
      border-radius: 50%;
      background: white;
      cursor: pointer;
      border: none;
    }
    
    .scene-nav {
      position: absolute;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 10px;
      z-index: 1000;
    }
    
    .scene-button {
      padding: 10px 20px;
      background: rgba(67, 67, 67, 0.8);
      color: white;
      border: none;
      border-radius: 20px;
      cursor: pointer;
      font-size: 14px;
      transition: background 0.2s;
    }
    
    .scene-button:hover {
      background: rgba(100, 100, 100, 0.9);
    }
    
    .scene-button.active {
      background: rgba(33, 150, 243, 0.9);
    }
  </style>
</head>
<body class="multiple-scenes view-control-buttons">

<div id="pano"></div>

<!-- <div class="music-controls">
    <button class="music-button" id="playPauseBtn" title="Play/Pause Music">
      <svg id="playIcon" viewBox="0 0 24 24">
        <path d="M8 5v14l11-7z"/>
      </svg>
      <svg id="pauseIcon" viewBox="0 0 24 24" style="display:none;">
        <path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z"/>
      </svg>
    </button>
    
    <div class="volume-slider-container">
      <button class="music-button" id="volumeBtn" title="Volume">
        <svg id="volumeIcon" viewBox="0 0 24 24">
          <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>
        </svg>
      </button>
      <div class="volume-slider" id="volumeSlider">
        <input type="range" id="volumeRange" min="0" max="100" value="70">
      </div>
    </div>
</div>
-->


<div id="sceneList">
  <ul class="scenes">
    
      <a href="javascript:void(0)" class="scene" data-id="0-entrance-from-diller-road">
        <li class="text">Entrance from Diller Road</li>
      </a>
    
      <a href="javascript:void(0)" class="scene" data-id="1-entrance-on-cole-from-north">
        <li class="text">Entrance on Cole from North</li>
      </a>
    
      <a href="javascript:void(0)" class="scene" data-id="2-entrance-from-lima-on-cole-st">
        <li class="text">Entrance from Lima on Cole St</li>
      </a>
    
      <a href="javascript:void(0)" class="scene" data-id="3-parking-lot---west">
        <li class="text">Parking Lot - West</li>
      </a>
    
      <a href="javascript:void(0)" class="scene" data-id="4-parking-lot---east">
        <li class="text">Parking Lot - East</li>
      </a>
    
      <a href="javascript:void(0)" class="scene" data-id="5-lobby">
        <li class="text">Lobby</li>
      </a>
    
      <a href="javascript:void(0)" class="scene" data-id="6-sanctuary-center-aisle">
        <li class="text">Sanctuary-Center Aisle</li>
      </a>
    
      <a href="javascript:void(0)" class="scene" data-id="7-sanctuary-east-aisle">
        <li class="text">Sanctuary-East Aisle</li>
      </a>
    
      <a href="javascript:void(0)" class="scene" data-id="8-sanctuary-west-aisle">
        <li class="text">Sanctuary-West Aisle</li>
      </a>
    
      <a href="javascript:void(0)" class="scene" data-id="9-welcome-center-in-lobby">
        <li class="text">Welcome Center in Lobby</li>
      </a>
    
      <a href="javascript:void(0)" class="scene" data-id="10-cafe">
        <li class="text">Cafe</li>
      </a>
    
      <a href="javascript:void(0)" class="scene" data-id="11-first-time-families">
        <li class="text">First Time Families</li>
      </a>
    
      <a href="javascript:void(0)" class="scene" data-id="12-birth-to-13-months-entrance">
        <li class="text">Birth to 13 months Entrance</li>
      </a>
    
      <a href="javascript:void(0)" class="scene" data-id="13-birth-to-13-months-room">
        <li class="text">Birth to 13 months Room</li>
      </a>
    
      <a href="javascript:void(0)" class="scene" data-id="14-13-24-months-entrance">
        <li class="text">13-24 months Entrance</li>
      </a>
    
      <a href="javascript:void(0)" class="scene" data-id="15-13-24-months-room">
        <li class="text">13-24 months Room</li>
      </a>
    
      <a href="javascript:void(0)" class="scene" data-id="16-2-years-old-entrance">
        <li class="text">2 years old Entrance</li>
      </a>
    
      <a href="javascript:void(0)" class="scene" data-id="17-2-years-old-room">
        <li class="text">2 years old Room</li>
      </a>
    
      <a href="javascript:void(0)" class="scene" data-id="18-3-years-old-entrance">
        <li class="text">3 years old Entrance</li>
      </a>
    
      <a href="javascript:void(0)" class="scene" data-id="19-3-years-old-room">
        <li class="text">3 years old Room</li>
      </a>
    
      <a href="javascript:void(0)" class="scene" data-id="20-tinytown-story-room">
        <li class="text">tinytown Story Room</li>
      </a>
    
      <a href="javascript:void(0)" class="scene" data-id="21-4-yrs-old-kindergarten-entrance">
        <li class="text">4 yrs old-Kindergarten Entrance</li>
      </a>
    
      <a href="javascript:void(0)" class="scene" data-id="22-4-yrs-old-kindergarten-worship">
        <li class="text">4 yrs old-Kindergarten Worship</li>
      </a>
    
      <a href="javascript:void(0)" class="scene" data-id="23-1st-to-5th-grade">
        <li class="text">1st to 5th Grade</li>
      </a>
    
  </ul>
</div>

<div id="titleBar">
  <h1 class="sceneName"></h1>
</div>

<div class="music-controls">
    <button class="music-button" id="playPauseBtn" title="Play/Pause Music">
      <svg id="playIcon" viewBox="0 0 24 24">
        <path d="M8 5v14l11-7z"/>
      </svg>
      <svg id="pauseIcon" viewBox="0 0 24 24" style="display:none;">
        <path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z"/>
      </svg>
    </button>
    
    <div class="volume-slider-container">
      <button class="music-button" id="volumeBtn" title="Volume">
        <svg id="volumeIcon" viewBox="0 0 24 24">
          <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>
        </svg>
      </button>
      <div class="volume-slider" id="volumeSlider">
        <input type="range" id="volumeRange" min="0" max="100" value="70">
      </div>
    </div>
</div>


<a href="javascript:void(0)" id="autorotateToggle">
  <img class="icon off" src="img/play.png">
  <img class="icon on" src="img/pause.png">
</a>

<a href="javascript:void(0)" id="fullscreenToggle">
  <img class="icon off" src="img/fullscreen.png">
  <img class="icon on" src="img/windowed.png">
</a>

<a href="javascript:void(0)" id="sceneListToggle">
  <img class="icon off" src="img/expand.png">
  <img class="icon on" src="img/collapse.png">
</a>

<a href="javascript:void(0)" id="viewUp" class="viewControlButton viewControlButton-1">
  <img class="icon" src="img/up.png">
</a>
<a href="javascript:void(0)" id="viewDown" class="viewControlButton viewControlButton-2">
  <img class="icon" src="img/down.png">
</a>
<a href="javascript:void(0)" id="viewLeft" class="viewControlButton viewControlButton-3">
  <img class="icon" src="img/left.png">
</a>
<a href="javascript:void(0)" id="viewRight" class="viewControlButton viewControlButton-4">
  <img class="icon" src="img/right.png">
</a>
<a href="javascript:void(0)" id="viewIn" class="viewControlButton viewControlButton-5">
  <img class="icon" src="img/plus.png">
</a>
<a href="javascript:void(0)" id="viewOut" class="viewControlButton viewControlButton-6">
  <img class="icon" src="img/minus.png">
</a>

<script src="vendor/screenfull.min.js" ></script>
<script src="vendor/bowser.min.js" ></script>
<script src="vendor/marzipano.js" ></script>

<script src="data.js"></script>
<script src="index.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/marzipano/0.10.2/marzipano.js"></script>
  <script>
    // Audio setup
/*    const defaultMusic = new Audio('https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3'); */
	const defaultMusic = new Audio('assets/Stream-Music-Christmas-2023.mp3');
    defaultMusic.loop = true;
    defaultMusic.volume = 0.6;
    
    let sceneMusic = null;
    let isPlaying = false;
    let savedDefaultTime = 0;
    
    // Scene-specific music (optional overrides)
    const sceneMusicUrls = {
      1: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3'
      // Add more scene-specific music: sceneIndex: 'url'
    };
    
    // Play/Pause functionality
    const playPauseBtn = document.getElementById('playPauseBtn');
    const playIcon = document.getElementById('playIcon');
    const pauseIcon = document.getElementById('pauseIcon');
    
    playPauseBtn.addEventListener('click', () => {
      if (isPlaying) {
        pauseMusic();
      } else {
        playMusic();
      }
    });
    
    function playMusic() {
      if (sceneMusic) {
        sceneMusic.play();
      } else {
        defaultMusic.play();
      }
      isPlaying = true;
      playIcon.style.display = 'none';
      pauseIcon.style.display = 'block';
    }
    
    function pauseMusic() {
      if (sceneMusic) {
        sceneMusic.pause();
      } else {
        defaultMusic.pause();
      }
      isPlaying = false;
      playIcon.style.display = 'block';
      pauseIcon.style.display = 'none';
    }
    
    // Volume control
    const volumeBtn = document.getElementById('volumeBtn');
    const volumeSlider = document.getElementById('volumeSlider');
    const volumeRange = document.getElementById('volumeRange');
    
    volumeBtn.addEventListener('click', () => {
      volumeSlider.classList.toggle('active');
    });
    
    volumeRange.addEventListener('input', (e) => {
      const volume = e.target.value / 100;
      defaultMusic.volume = volume;
      if (sceneMusic) sceneMusic.volume = volume;
    });
    
    // Close volume slider when clicking outside
    document.addEventListener('click', (e) => {
      if (!e.target.closest('.volume-slider-container')) {
        volumeSlider.classList.remove('active');
      }
    });
    
    // Scene music management
    function switchToSceneMusic(sceneIndex) {
      // If scene has custom music
      if (sceneMusicUrls[sceneIndex]) {
        // Save default music position and pause
        savedDefaultTime = defaultMusic.currentTime;
        defaultMusic.pause();
        
        // Create and play scene music
        if (sceneMusic) {
          sceneMusic.pause();
          sceneMusic = null;
        }
        
        sceneMusic = new Audio(sceneMusicUrls[sceneIndex]);
        sceneMusic.volume = volumeRange.value / 100;
        
        sceneMusic.addEventListener('ended', () => {
          // Return to default music when scene music ends
          sceneMusic = null;
          defaultMusic.currentTime = savedDefaultTime;
          if (isPlaying) defaultMusic.play();
        });
        
        if (isPlaying) sceneMusic.play();
      } else {
        // No custom music for this scene, use default
        if (sceneMusic) {
          sceneMusic.pause();
          sceneMusic = null;
        }
        
        defaultMusic.currentTime = savedDefaultTime;
        if (isPlaying) defaultMusic.play();
      }
    }
    
    /* Marzipano setup
    const panoElement = document.getElementById('pano');
    const viewer = new Marzipano.Viewer(panoElement);
    
    // Create scenes with placeholder images
    const scenes = [
      { name: 'Scene 1', levels: createLevels(2000) },
      { name: 'Scene 2', levels: createLevels(2000) },
      { name: 'Scene 3', levels: createLevels(2000) }
    ];
	
	*/
    
    function createLevels(size) {
      return [{
        tileSize: 256,
        size: size,
        fallbackOnly: true
      }];
    }
    
    /* const scenesData = scenes.map((scene, index) => {
      const geometry = new Marzipano.CubeGeometry(scene.levels);
      
      const source = new Marzipano.ImageUrlSource((tile) => {
        const colors = ['4A90E2', 'E24A4A', '4AE290'];
        return `https://via.placeholder.com/256/${colors[index]}/ffffff?text=${scene.name}`;
      });
      
      const view = new Marzipano.RectilinearView();
      
      return viewer.createScene({
        source: source,
        geometry: geometry,
        view: view,
        pinFirstLevel: true
      });
    });
    
    // Switch to first scene
    scenesData[0].switchTo();
    
    // Scene navigation
    const sceneButtons = document.querySelectorAll('.scene-button');
    sceneButtons.forEach((button, index) => {
      button.addEventListener('click', () => {
        scenesData[index].switchTo();
        switchToSceneMusic(index);
        
        sceneButtons.forEach(btn => btn.classList.remove('active'));
        button.classList.add('active');
      });
    });
    
	*/
	
    // Auto-play music on first user interaction
    document.addEventListener('click', () => {
      if (!isPlaying) {
        playMusic();
      }
    }, { once: true });
  </script>
</body>
</html>
